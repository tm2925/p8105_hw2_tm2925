---
title: "Homework 2 (tm2925)"
output: html_document
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(janitor)
library(readxl)
```

##Problem 1

```{r read and tidy data1}
transit_data = read_csv(file = "./data1/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() 
  skimr::skim(transit_data)
```


```{r}
transit_data_select = 
  select(transit_data, line, station_name, station_latitude, station_longitude, route1:route11, entry, vending, entrance_type, ada) %>% 
  gather(route1:route11, key = "route", value = "route_lines") %>% 
  mutate(entry_logical = recode(entry, `YES` = "TRUE", `NO` = "FALSE")) 
```

```{r problem 1 questions}
transit_data_select %>% 
  n_distinct(station_name) %>% 
#number of stations that are ADA compliant
  sum(ada) %>% 
#proportion of station entrances / exits without vending allow entrance
  filter(vending == "NO") %>% 
  mean(entry_logical)
  #taking mean of logical variable gives you proportion of TRUE values.
```

Reformat data so that route number and route name are distinct variables. How many distinct stations serve the A train? Of the stations that serve the A train, how many are ADA compliant
```{r data1 reformat}
transit_data_select %>% 
filter(route_lines == "A") %>% 
n_distinct(station_name) %>% 
mean(ada)
```


# Problem 2

```{r eval=FALSE}
trash_data = readxl::read_excel(path = "./data2/HealthyHarborWaterWheelTotals2017-9-26.xlsx",
                                sheet = 1, 
                                range = cell_cols("A:N"),
                                skip = row_number(1)) %>% 
janitor::clean_names()
skimr::skim(trash_data) 

gather(trash_data, "trash_type", value = "trash_quantity", plastic_bottles:sports_balls) 
filter(trash_data, !is.na(dumpster)) 
round(sports_balls, digits = 0)
as.integer(sports_balls)
```

```{r read in data2_2017}
precip_2017 = readxl::read_excel(path = "./data2/HealthyHarborWaterWheelTotals2017-9-26.xlsx",
                                sheet = 3,
                                skip = row_number(1)) %>% 
janitor::clean_names()
filter(precip_2017, !is.na(total)) 
filter(precip_2017, !is.na(month)) %>% 
mutate(year = 2017)

precip_2016 = readxl::read_excel(path = "./data2/HealthyHarborWaterWheelTotals2017-9-26.xlsx",
                                sheet = 4,
                                skip = row_number(1)) %>% 
janitor::clean_names()
filter(precip_2016, !is.na(total)) 
filter(precip_2016, !is.na(month)) %>% 
mutate(year = 2016)

precip_data = left_join(precip_2017, precip_2016, by = "month")
colnames(precip_data)[2] = "2017"
colnames(precip_data)[3] = "2016"
```

#Problem 3

```{r}
library(p8105.datasets)
data("brfss_smart2010")  
brfss_df = tibble(
  janitor::clean_names(brfss_smart2010),
  filter(brfss_smart2010, Topic == "Overall Health"),
  select(brfss_smart2010, -Class, -Topic, -Question, -Sample_Size, -Confidence_limit_Low::GeoLocation), 
  spread(brfss_smart2010, Response, Data_value)
  )
```

mutate(Good_Response =  )








